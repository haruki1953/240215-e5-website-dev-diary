## 接口名称

**接口URL：** `/api`  
**调用方式：** POST

### 请求参数

#### Query 参数
- 无

#### Body 参数 （application/json）
- `username` (string, required): 用户名

#### Header 参数
- 无

**示例（curl）**

```
curl -X POST \
  http://example.com/api/register \
  -H 'Content-Type: application/json' \
  -d '{
    "username": "example_user",
    "password": "example_password",
    "email": "example@example.com"
}'
```

### 返回响应

#### 成功
```json
{
  "code": 0,
  "message": "成功"
}
```

#### 失败
```json
{
  "code": 1,
  "message": "失败"
}
```



# 登录注册接口

## 注册接口

**接口URL：** `/auth/register`  
**调用方式：** POST  

### 请求参数

#### Body 参数 （application/json）

| 参数名   | 类型   | 必填 | 描述                   |
|----------|--------|------|------------------------|
| username | string | 是   | 用户名，长度1到32，只能包含字母、数字和下划线 |
| password | string | 是   | 密码，长度6到32，只能包含字母、数字和下划线   |
| email    | string | 是   | 邮箱                   |

**示例（curl）**

```
curl -X POST \
  http://127.0.0.1:3007/auth/register \
  -H 'Content-Type: application/json' \
  -d '{
    "username": "example_user",
    "password": "example_password",
    "email": "example@example.com"
}'
```

### 返回响应

成功 201

```json
{
    "code": 0,
    "message": "注册成功"
}
```

失败 400

```json
{
    "code": 1,
    "message": "注册失败: 用户名已存在"
}
```



## 用户名登录

**接口URL：** `/auth/loginByUsername`  
**调用方式：** POST  

### 请求参数

#### Body 参数 （application/json）

| 参数名   | 类型   | 必填 | 描述                                          |
| -------- | ------ | ---- | --------------------------------------------- |
| username | string | 是   | 用户名，长度1到32，只能包含字母、数字和下划线 |
| password | string | 是   | 密码，长度6到32，只能包含字母、数字和下划线   |

**示例（curl）**

```
curl -X POST \
  http://127.0.0.1:3007/auth/loginByUsername \
  -H 'Content-Type: application/json' \
  -d '{
    "username": "example_user",
    "password": "example_password"
}'
```

### 返回响应

成功 201

```json
{
    "code":0,
    "message":"登录成功",
    "token":"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6MSwidXNlcm5hbWUiOiJhZG1pbiIsImlhdCI6MTcwODczOTMxNCwiZXhwIjoxNzE5MTA3MzE0fQ.KfieByY-iy-aVQUQqwBVTT8WLn1ZJXyIFwMrHMsQ_Lc"
}
```

失败 400

```json
{
    "code": 1,
    "message": "登录失败"
}
```

## 邮箱登录

**接口URL：** `/auth/loginByEmail`  
**调用方式：** POST  

### 请求参数

#### Body 参数 （application/json）

| 参数名   | 类型   | 必填 | 描述                                        |
| -------- | ------ | ---- | ------------------------------------------- |
| email    | string | 是   | 邮箱                                        |
| password | string | 是   | 密码，长度6到32，只能包含字母、数字和下划线 |

**示例（curl）**

```
curl -X POST \
  http://127.0.0.1:3007/auth/loginByEmail \
  -H 'Content-Type: application/json' \
  -d '{
    "email": "example@example.com",
    "password": "example_password"
}'
```

### 返回响应

成功 201

```json
{
    "code":0,
    "message":"登录成功",
    "token":"Bearer xxx"
}
```

失败 400

```json
{
    "code": 1,
    "message": "登录失败"
}
```



# 用户相关接口

## 获取个人信息

**接口URL：** `/user/profile`  
**调用方式：** GET 

### 请求参数

#### Header 参数 

| 参数名        | 类型   | 必填 | 描述                             |
| ------------- | ------ | ---- | -------------------------------- |
| Authorization | string | 是   | Bearer token值, 示例: Bearer xxx |

**示例（curl）**

```
curl -X GET \
  http://127.0.0.1:3007/user/profile \
  -H 'Authorization: Bearer xxx'

```

### 返回响应

成功 201

```json
{
  "code": 0,
  "message": "个人信息获取成功",
  "data": {
    "id": 1,
    "username": "example_user",
    "email": "example@example.com",
    "nickname": null,
    "avatar": null,
    "contact_info": null,
    "bio": null,
    "registered_at": "2024-02-24T07:46:09.214Z",
    "last_login": "2024-02-24T09:54:14.014Z",
    "account_status": "active",
    "e5_subscription_date": null,
    "e5_expiration_date": null,
    "helping_users": "[]",
    "helped_users": "[]",
    "helping_by_users": "[]",
    "helped_by_users": "[]",
    "notifications": [{
      "id": "string1", "type": "type1", "content": "content1", "time": "time1", "otherInfo": {}
    }, {
      "id": "string2", "type": "type2", "content": "content2", "time": "time2", "otherInfo": {}
    }]
  }
}
```

失败 400

```json
{
    "code": 1,
    "message": "个人信息获取失败"
}
```

## 修改基本信息

**接口URL：** `/user/profile`  
**调用方式：** PATCH  

### 请求参数

#### Header 参数 

| 参数名        | 类型   | 必填 | 描述                             |
| ------------- | ------ | ---- | -------------------------------- |
| Authorization | string | 是   | Bearer token值, 示例: Bearer xxx |

#### Body 参数 （application/json）

| 参数名      | 类型   | 必填 | 描述                  |
| ----------- | ------ | ---- | --------------------- |
| nickname    | string | 是   | 昵称，长度不超过32字  |
| contactInfo | string | 是   | 联系信息，不超过500字 |
| bio         | string | 是   | 简介，不超过500字     |

**示例（curl）**

```
curl -X PATCH \
  http://127.0.0.1:3007/user/profile \
  -H 'Content-Type: application/json' \
  -H 'Authorization: Bearer xxx' \
  -d '{
    "nickname": "new_nickname",
    "contactInfo": "new_contact_info",
    "bio": "new_bio"
}'
```

### 返回响应

成功 201

```json
{
    "code":0,
    "message":"修改成功"
}
```

失败 400

```json
{
    "code": 1,
    "message": "修改失败"
}
```



